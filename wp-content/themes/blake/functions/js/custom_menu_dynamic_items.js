function removeitem(e){var t=document.getElementById("menu-"+e);if(t){var i=document.getElementById("menu-"+e).parentNode;throwaway_node=i.removeChild(t)}updatepostdata()}function edititem(e){itemTitle=jQuery("#title"+e).attr("value"),itemURL=jQuery("#linkurl"+e).attr("value"),itemAnchorTitle=jQuery("#anchortitle"+e).attr("value"),itemNewWindow=jQuery("#newwindow"+e).attr("value"),itemDesc=jQuery("#description"+e).attr("value"),jQuery("#dialog-confirm").dialog("option","itemID",e),jQuery("#dialog-confirm").dialog("open"),jQuery("#edittitle").attr("value",itemTitle),jQuery("#editlink").attr("value",itemURL),jQuery("#editanchortitle").attr("value",itemAnchorTitle),jQuery("#editnewwindow option[value='"+itemNewWindow+"']").attr("selected","selected"),jQuery("#editdescription").attr("value",itemDesc)}function updatepostdata(){jQuery("#custom-nav").find("li").each(function(e){e+=1;var t=jQuery(this).attr("value");jQuery(this).find("#position"+t).attr("value",e),jQuery(this).attr("id","menu-"+e),jQuery(this).attr("value",e),jQuery(this).find("#dbid"+t).attr("name","dbid"+e),jQuery(this).find("#dbid"+t).attr("id","dbid"+e),jQuery(this).find("#postmenu"+t).attr("name","postmenu"+e),jQuery(this).find("#postmenu"+t).attr("id","postmenu"+e);var i=jQuery(this).find("#parent"+t).parent().parent().parent().attr("value");jQuery(this).find("#parent"+t).attr("name","parent"+e),jQuery(this).find("#parent"+t).attr("id","parent"+e),i||(i=0),jQuery(this).find("#parent"+t).attr("value",i),jQuery(this).find("#title"+t).attr("name","title"+e),jQuery(this).find("#title"+t).attr("id","title"+e),jQuery(this).find("#linkurl"+t).attr("name","linkurl"+e),jQuery(this).find("#linkurl"+t).attr("id","linkurl"+e),jQuery(this).find("#description"+t).attr("name","description"+e),jQuery(this).find("#description"+t).attr("id","description"+e),jQuery(this).find("#icon"+t).attr("name","icon"+e),jQuery(this).find("#icon"+t).attr("id","icon"+e),jQuery(this).find("#position"+t).attr("name","position"+e),jQuery(this).find("#position"+t).attr("id","position"+e),jQuery(this).find("#linktype"+t).attr("name","linktype"+e),jQuery(this).find("#linktype"+t).attr("id","linktype"+e),jQuery(this).find("#anchortitle"+t).attr("name","anchortitle"+e),jQuery(this).find("#anchortitle"+t).attr("id","anchortitle"+e),jQuery(this).find("#newwindow"+t).attr("name","newwindow"+e),jQuery(this).find("#newwindow"+t).attr("id","newwindow"+e),jQuery(this).find("dl > dt > span > #remove"+t).attr("value",e),jQuery(this).find("dl > dt > span > #remove"+t).attr("onClick","removeitem( "+e+")"),jQuery(this).find("dl > dt > span > #remove"+t).attr("id","remove"+e),jQuery("#licount").attr("value",e)})}function get_html_translation_table(e,t){var i={},n={},r=0,a="",u={},d={},l={},o={};if(u[0]="HTML_SPECIALCHARS",u[1]="HTML_ENTITIES",d[0]="ENT_NOQUOTES",d[2]="ENT_COMPAT",d[3]="ENT_QUOTES",l=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":u[e],o=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":d[t],"HTML_SPECIALCHARS"!==l&&"HTML_ENTITIES"!==l)throw new Error("Table: "+l+" not supported");i[38]="&amp;","HTML_ENTITIES"===l&&(i[160]="&nbsp;",i[161]="&iexcl;",i[162]="&cent;",i[163]="&pound;",i[164]="&curren;",i[165]="&yen;",i[166]="&brvbar;",i[167]="&sect;",i[168]="&uml;",i[169]="&copy;",i[170]="&ordf;",i[171]="&laquo;",i[172]="&not;",i[173]="&shy;",i[174]="&reg;",i[175]="&macr;",i[176]="&deg;",i[177]="&plusmn;",i[178]="&sup2;",i[179]="&sup3;",i[180]="&acute;",i[181]="&micro;",i[182]="&para;",i[183]="&middot;",i[184]="&cedil;",i[185]="&sup1;",i[186]="&ordm;",i[187]="&raquo;",i[188]="&frac14;",i[189]="&frac12;",i[190]="&frac34;",i[191]="&iquest;",i[192]="&Agrave;",i[193]="&Aacute;",i[194]="&Acirc;",i[195]="&Atilde;",i[196]="&Auml;",i[197]="&Aring;",i[198]="&AElig;",i[199]="&Ccedil;",i[200]="&Egrave;",i[201]="&Eacute;",i[202]="&Ecirc;",i[203]="&Euml;",i[204]="&Igrave;",i[205]="&Iacute;",i[206]="&Icirc;",i[207]="&Iuml;",i[208]="&ETH;",i[209]="&Ntilde;",i[210]="&Ograve;",i[211]="&Oacute;",i[212]="&Ocirc;",i[213]="&Otilde;",i[214]="&Ouml;",i[215]="&times;",i[216]="&Oslash;",i[217]="&Ugrave;",i[218]="&Uacute;",i[219]="&Ucirc;",i[220]="&Uuml;",i[221]="&Yacute;",i[222]="&THORN;",i[223]="&szlig;",i[224]="&agrave;",i[225]="&aacute;",i[226]="&acirc;",i[227]="&atilde;",i[228]="&auml;",i[229]="&aring;",i[230]="&aelig;",i[231]="&ccedil;",i[232]="&egrave;",i[233]="&eacute;",i[234]="&ecirc;",i[235]="&euml;",i[236]="&igrave;",i[237]="&iacute;",i[238]="&icirc;",i[239]="&iuml;",i[240]="&eth;",i[241]="&ntilde;",i[242]="&ograve;",i[243]="&oacute;",i[244]="&ocirc;",i[245]="&otilde;",i[246]="&ouml;",i[247]="&divide;",i[248]="&oslash;",i[249]="&ugrave;",i[250]="&uacute;",i[251]="&ucirc;",i[252]="&uuml;",i[253]="&yacute;",i[254]="&thorn;",i[255]="&yuml;"),"ENT_NOQUOTES"!==o&&(i[34]="&quot;"),"ENT_QUOTES"===o&&(i[39]="&#39;"),i[60]="&lt;",i[62]="&gt;";for(r in i)a=String.fromCharCode(r),n[a]=i[r];return n}function htmlentities(e,t){var i={},n="",r="",a="";if(r=e.toString(),!1===(i=this.get_html_translation_table("HTML_ENTITIES",t)))return!1;i["'"]="&#039;";for(n in i)a=i[n],r=r.split(n).join(a);return r}function htmlspecialchars(e,t,i,n){var r=0,a=0,u=!1;("undefined"==typeof t||null===t)&&(t=2),e=e.toString(),n!==!1&&(e=e.replace(/&/g,"&amp;")),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");var d={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===t&&(u=!0),"number"!=typeof t){for(t=[].concat(t),a=0;a<t.length;a++)0===d[t[a]]?u=!0:d[t[a]]&&(r|=d[t[a]]);t=r}return t&d.ENT_HTML_QUOTE_SINGLE&&(e=e.replace(/'/g,"&#039;")),u||(e=e.replace(/"/g,"&quot;")),e}function appendToList(e,t,i,n,r,a,u){var d="",l="",o="",s="",c="",p="";"Custom"==t?(d=htmlspecialchars(document.getElementById("custom_menu_item_name").value,"ENT_QUOTES"),l=htmlspecialchars(document.getElementById("custom_menu_item_url").value,"ENT_QUOTES"),o="",s="",inputlinktype="custom",c=htmlspecialchars(document.getElementById("custom_menu_item_description").value,"ENT_QUOTES")):"Page"==t?(d=htmlspecialchars(i.toString(),"ENT_QUOTES"),l=n.toString(),o=r.toString(),s="0",inputlinktype="page",c=htmlspecialchars(u.toString(),"ENT_QUOTES")):"Category"==t?(d=htmlspecialchars(i.toString(),"ENT_QUOTES"),l=n.toString(),o=r.toString(),s="0",inputlinktype="category",c=htmlspecialchars(u.toString(),"ENT_QUOTES")):(d="",d="",o="",s="",inputlinktype="custom",c="");var m=document.getElementById("custom-nav").getElementsByTagName("li").length,y=m,h=0;try{document.getElementById("menu-"+y.toString()).value}catch(v){h=1}for(;0==h;){y+=1;try{document.getElementById("menu-"+y.toString()).value}catch(v){h=1}}jQuery(".maintitle").after('<div id="message" class="updated fade below-h2"><p>Menu Item added!</p></div>'),jQuery("#message").animate({opacity:1},2e3).fadeOut(300,function(){jQuery(this).remove()}),jQuery("#custom-nav").append('<li id="menu-'+y+'" value="'+y+'"><div class="dropzone ui-droppable"></div><dl class="ui-droppable"><dt><span class="title">'+d+'</span><span class="controls"><span class="type">'+t+'</span><a id="edit'+y+'" onclick="edititem( '+y+')" value="'+y+'"><img class="edit" alt="Edit Menu Item" title="Edit Menu Item" src="'+e+'/functions/images/ico-edit.png" /></a> <a id="remove'+y+'" onclick="removeitem( '+y+')" value="'+y+'"><img class="remove" alt="Remove from Custom Menu" title="Remove from Custom Menu" src="'+e+'/functions/images/ico-close.png" /></a> <a href="'+l+'" target="_blank"><img alt="View Custom Link" title="View Custom Link" src="'+e+'/functions/images/ico-viewpage.png" /></a></span></dt></dl><a class="hide" href="'+l+'">'+d+'</a><input type="hidden" name="postmenu'+y+'" id="postmenu'+y+'" value="'+o+'" /><input type="hidden" name="parent'+y+'" id="parent'+y+'" value="'+s+'" /><input type="hidden" name="title'+y+'" id="title'+y+'" value="'+d+'" /><input type="hidden" name="linkurl'+y+'" id="linkurl'+y+'" value="'+l+'" /><input type="hidden" name="description'+y+'" id="description'+y+'" value="'+c+'" /><input type="hidden" name="icon'+y+'" id="icon'+y+'" value="'+p+'" /><input type="hidden" name="position'+y+'" id="position'+y+'" value="'+y+'" /><input type="hidden" name="linktype'+y+'" id="linktype'+y+'" value="'+inputlinktype+'" /><input type="hidden" name="anchortitle'+y+'" id="anchortitle'+y+'" value="'+d+'" /><input type="hidden" name="newwindow'+y+'" id="newwindow'+y+'" value="0" /></li>'),jQuery("#menu-"+y).draggable({handle:" > dl",opacity:.8,addClasses:!1,helper:"clone",zIndex:100}),jQuery("#menu-"+y+" dl, #menu-"+y+" .dropzone").droppable({accept:"#"+y+", #custom-nav li",tolerance:"pointer",drop:function(e,t){var i=jQuery(this).parent(),n=!jQuery(this).hasClass("dropzone");n&&0==i.children("ul").length&&i.append("<ul/>"),n?i.children("ul").append(t.draggable):i.before(t.draggable),i.find("dl,.dropzone").css({backgroundColor:"",borderColor:""});var r=t.draggable.attr("value"),a=i.attr("value");i.find("#menu-"+r).find("#parent"+r).val(a),jQuery(this).parent().find("dt").removeAttr("style"),jQuery(this).parent().find("div:first").removeAttr("style")},over:function(){"dropzone ui-droppable"==jQuery(this).attr("class")?jQuery(this).parent().find("div:first").css("background","none").css("height","50px"):"ui-droppable"==jQuery(this).attr("class")&&jQuery(this).parent().find("dt:first").css("background","#d8d8d8");jQuery(this).parent().attr("id")},out:function(){jQuery(this).parent().find("dt").removeAttr("style"),jQuery(this).parent().find("div:first").removeAttr("style"),jQuery(this).filter(".dropzone").css({borderColor:""})}}),updatepostdata()}